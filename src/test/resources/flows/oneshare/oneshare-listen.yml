id: oneshare-listen
namespace: io.kestra.tests

triggers:
  - id: file_created
    type: io.kestra.plugin.microsoft365.oneshare.Trigger
    tenantId: "{{ globals.tenantId }}"
    clientId: "{{ globals.clientId }}"
    clientSecret: "{{ globals.clientSecret }}"
    driveId: "{{ globals.driveId }}"
    path: "/Documents/TestTrigger"
    interval: PT10S

tasks:
  - id: end
    type: io.kestra.plugin.core.debug.Return
    format: "Detected new file: {{ trigger.files | jq('.[].name') }}"
